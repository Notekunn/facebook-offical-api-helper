module.exports = (api) => {
    const defaultCategory = {
        "1000": ["1200", "1201", "1207", "1208", "1210", "1211", "1212", "1213", "179943432047564", "180164648685982"],
        "1001": ["1105", "1108", "1109", "1112", "1114", "192511100766680", "370369022981015"],
        "1002": ["108366235907857", "1300", "1307", "1309", "169896676390222", "191684877517919", "197048876974331"],
        "1005": ["109976259083543", "152678898477239", "1600", "1800", "1801", "1802", "1803", "1804", "1805", "964585346994407"],
        "1006": ["1022050661163852", "108427109235243", "1086422341396773", "109976259083543", "110290705711626", "124861974254366", "128966563840349", "133152263416981", "133436743388217", "139225689474222", "144982405562750", "145118935550090", "145887745471348", "147714868971098", "150108431712141", "1574325646194878", "164243073639257", "169896676390222", "1730236023904374", "1757592557789532", "1758418281071392", "179943432047564", "180410821995109", "186982054657561", "187133811318958", "187714557925874", "188234584533149", "192511100766680", "193705277324704", "197048876974331", "198327773511962", "200600219953504", "209889829023118", "2231", "241113486274430", "2505", "2601", "2602", "2637", "273819889375819", "505091123022329", "557045641143373", "806240166180298"],
        "1007": ["1108", "1109", "1114", "1301", "1335670856447673", "1350536325044173", "1600", "1601", "1602", "1602034176774683", "1604", "1605", "1606", "1610", "1614", "1617", "1700", "1701", "1720316034885300", "1784467105117322", "180164648685982", "1802", "181475575221097", "1817904601806120", "301500100194179", "361282040719868", "471120789926333", "494338820719492", "502966423232592", "792007097567368", "842783295865930"],
        "1009": ["110249975723427", "132852590115660", "150060378385891", "1605186416478696", "192647794097278", "211579738882707", "2201", "2202", "2205", "2206", "2208", "2209", "2210", "2211", "2213", "2214", "2216", "2217", "2219", "2220", "2222", "2223", "2224", "2226", "2230", "2232", "2262", "2263", "2265", "2300", "2301", "2303"],
        "1013": ["110152272401235", "140234236045713", "150148928375567", "152880021441864", "161422927240513", "170968163319233", "180551801986954", "184395321600410", "187714557925874", "191334714243008", "192775991124365", "2214", "2233", "2235", "2236", "2238", "2239", "2240", "2241", "2244", "2245", "2248", "2250", "2253", "2255", "2256", "2257", "2258", "2601", "2602", "2603", "2606", "2618", "2637", "297544187300691", "373543049350668"],
        "1015": ["1109", "1112", "1114", "1400", "1402", "1404", "1405", "370369022981015", "791314250889943"],
        "1016": ["1756049968005436", "2700", "2701", "2702", "2703", "2704", "2705", "2706", "2707", "2708", "2709", "2710", "2711", "2712", "2713", "2714", "2715", "2716"],
        "1018": ["1080612391976317", "129417183848258", "1314020451960517", "1588880211410039", "192119584190796", "2612", "2903"],
        "882550498565241": ["103436486409265", "1071626812928876", "109976259083543", "110186619064706", "110290705711626", "1109", "1191146560918930", "1301", "133436743388217", "1335670856447673", "134015953331113", "135930436481618", "139460309451166", "144535972273084", "152880021441864", "1614", "162841010432730", "1634618273525838", "164049010316507", "164409566941435", "169896676390222", "173883042668223", "174777552574651", "1758092431143387", "176527262444235", "1772749966301591", "1784293938474260", "179278362129856", "179943432047564", "180164648685982", "1805", "182582091788254", "184405378265823", "184460441595855", "186982054657561", "187301137968148", "187714557925874", "187724814583579", "187872604591327", "189018581118681", "191478144212980", "197048876974331", "197384240287028", "197817313562497", "200600219953504", "203246076360322", "207290352633942", "209630435729071", "213019495381691", "218693881483234", "220626791295805", "233804719972590", "244600818962350", "253482421696626", "2603", "261213210912085", "273819889375819", "282281972123162", "384382644921530", "596582600510249", "619759428190024", "756092301147942", "792007097567368", "853312078105992", "865117100300601", "943469559038367", "987187691402362"]
    };
    const randFrom = (arr) => arr[Math.floor(Math.random() * arr.length)]

    return function ({ name, category, super_category }) {
        if (!defaultCategory[super_category]) {
            super_category = randFrom(Object.keys(defaultCategory));
        }
        if (defaultCategory[super_category].indexOf(category) == -1) {
            category = randFrom(defaultCategory[super_category]);
        }
        return api.post(`https://mbasic.facebook.com/pages/create/add/?ref_type=bookmark&ref=wizard`, {
                page_name: name,
                super_category,
                category,
                show_category_error: "1"
            }).then(f => f, f => f.statusCode)
    }
}